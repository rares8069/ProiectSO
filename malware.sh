#!/bin/bash

file_path="$1"
output_path="$2"

lines=$(wc -l < "$file_path")
words=$(wc -w < "$file_path")
characters=$(wc -m < "$file_path")


if [ "$lines" -lt 3 ]; then
    exit 1
fi

if [ "$words" -gt 1000 ]; then
    exit 1
fi

if [ "$characters" -gt 2000 ]; then
    exit 1
fi

if grep -q -E "corrupted|dangerous|risk|attack|malware|virus" "$file_path" || grep -q -P "[^\x00-\x7F]" "$file_path"; then
    exit 1
else
    exit 0
fi

